<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Development :: Backstage Workshop</title>
    <link rel="canonical" href="https://redhat-scholars.github.io/backstage-workshop/backstage-workshop/04-development.html">
    <link rel="prev" href="03-components.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://developers.redhat.com" target="_blank"><img src="../_/img/NewRHDFullLogo_4-color_white-wordmark.png" height="40px" alt="Red Hat Developer Program"></a>
      <a class="navbar-item" style="font-size: 24px; color: white" href="https://redhat-scholars.github.io/backstage-workshop">Backstage Workshop</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="https://developers.redhat.com/ebooks/" target="_blank">Books</a>
        <a class="navbar-item" href="https://developers.redhat.com/cheatsheets/" target="_blank">Cheat Sheets</a>
        <a class="navbar-item" href="https://developers.redhat.com/events/" target="_blank">Upcoming Events</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">More Tutorials</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/kubernetes-tutorial/" target="_blank">Kubernetes</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/istio-tutorial/" target="_blank">Istio</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/quarkus-tutorial/" target="_blank">Quarkus</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/knative-tutorial/" target="_blank">Knative</a>
            <a class="navbar-item" href="https://redhat-developer-demos.github.io/tekton-tutorial/" target="_blank">Tekton</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="backstage-workshop" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html"></a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="01-setup.html">1. Backstage Pass: Accessing Backstage</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#prerequisites">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#cluster_access">Accessing OpenShift</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#project_access">OpenShift Projects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="01-setup.html#backstage_access">Accessing Backstage</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="02-templates.html">2. Templates</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-templates.html#templates">Software Templates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-templates.html#frontend">Launch the Front End Template</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-templates.html#github">Front End Component Repo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-templates.html#gateway">Launch the Gateway Template</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-templates.html#pipelines">Tekton Pipelines</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="02-templates.html#view_map">Access the resulting Workloads</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="03-components.html">3. Components</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-components.html#software_catalog">Software Catalog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-components.html#frontend">View the Frontend Component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-components.html#plugins">About Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-components.html#gateway">View the Gateway Component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-components.html#backend_template">Launch the Backend Template</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-components.html#backend">View the Backend Component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="03-components.html#configuration">Service Binding and Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="04-development.html">4. Development</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#devspaces">OpenShift Dev Spaces</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#gateway_update">Update the Gateway Component</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#validate_changes">Validate your changes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#next_steps">Paving your own Golden Paths</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Backstage Workshop</a></li>
    <li><a href="04-development.html">4. Development</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/redhat-scholars/backstage-workshop/edit/master/documentation/modules/ROOT/pages/04-development.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Development</h1>
<div class="sect1">
<h2 id="devspaces"><a class="anchor" href="#devspaces"></a>OpenShift Dev Spaces</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While there are many ways to craft a Golden Path for your development staff, the option to include OpenShift Dev Spaces provides a quick path to success with zero laptop installation effort.</p>
</div>
<div class="paragraph">
<p>In this chapter you will use Dev Spaces to introduce a new API endpoint to your Gateway component.  The goal will be to add a custom datapoint to the "Red Hat Summit POI" dataset, which is stored in-memory within the Gateway component.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="gateway_update"><a class="anchor" href="#gateway_update"></a>Use Dev Spaces to update the Gateway</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Enter your &lt;NAMESPACE&gt; into the search input of the Software Catalog to find your Gateway component entity</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/catalog_3.png" alt="catalog 3">
</div>
</div>
<div class="paragraph">
<p>From the Gateway Component Overview page, click on "OpenShift Dev Spaces (VS Code)"</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/gateway_devspaces.png" alt="gateway devspaces">
</div>
</div>
<div class="paragraph">
<p>Click on "Log in with OpenShift"</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/login_4.png" alt="login 4">
</div>
</div>
<div class="paragraph">
<p>Select the "GitHub" login option</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/login_5.png" alt="login 5">
</div>
</div>
<div class="paragraph">
<p>Grant Dev Spaces access to your OpenShift account</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/auth_6.png" alt="auth 6">
</div>
</div>
<div class="paragraph">
<p>Make sure to click on <strong><code>Grant</code></strong> next to the <strong>Summit23DevRHEL</strong> GitHub Org before approving Dev Spaces access</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/auth_4.png" alt="auth 4">
</div>
</div>
<div class="paragraph">
<p>Wait for your workspace to load.  This may take several minutes&#8230;&#8203;</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/devspaces_loading.png" alt="devspaces loading">
</div>
</div>
<div class="paragraph">
<p>After Dev Spaces has loaded your workspace, select "Yes, I trust the authors" to open the code editor</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/trust_the_authors.png" alt="trust the authors">
</div>
</div>
<div class="paragraph">
<p>Open <code>/src/main/java/com/rhdevelopers/summit/workshop/SummitBackendResource.java</code></p>
</div>
<div class="paragraph">
<p>Uncomment the following code block near the bottom of the file:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    @POST
    @Path("poi/add/point")
    public Response loadCustomPoi(PoiRecord record) {
        SUMMIT_POI_RECORDS.add(record);
        return Response.created(
            UriBuilder.fromPath("fake/poi/find/"+(SUMMIT_POI_RECORDS.size()-1)).build()
        ).entity("inserted custom data point").build();
    }</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_commit_your_change_and_sync"><a class="anchor" href="#_commit_your_change_and_sync"></a>Commit your change and sync</h3>
<div class="paragraph">
<p>Click on the Source Control tab in the side menu, then select the plus icon to add your change to the changeset. Enter your commit message in the top input box.  When you&#8217;re done, click "Commit"</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/commit.png" alt="commit">
</div>
</div>
<div class="paragraph">
<p>Click on "Sync Changes" to publish your changes to GitHub</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/sync.png" alt="sync">
</div>
</div>
<div class="paragraph">
<p>Check the resulting pipelines for activity by selecting <strong>Pipelines</strong> from the side menu in the OpenShift web console</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/pipelines_3.png" alt="pipelines 3">
</div>
</div>
<div class="paragraph">
<p>Verify that your change has been published via a new image</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validate_changes"><a class="anchor" href="#validate_changes"></a>Validate your change</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Connect to a Pod in the Gateway Deployment to test the new API endpoint</p>
</div>
<div class="paragraph">
<p>First, use the Topology view to examine the Gateway component</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/top_3.png" alt="top 3">
</div>
</div>
<div class="paragraph">
<p>Click on the running pod</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/top_3_gateway.png" alt="top 3 gateway">
</div>
</div>
<div class="paragraph">
<p>If needed, delete the Running pod in order to trigger a redeploy</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/gateway_pod_delete.png" alt="gateway pod delete">
</div>
</div>
<div class="paragraph">
<p>Return to the Topology view to open a connection to the new Gateway pod</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/top_3.png" alt="top 3">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/top_3_gateway.png" alt="top 3 gateway">
</div>
</div>
<div class="paragraph">
<p>Open a terminal connection on the new pod</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/gateway_pod_terminal.png" alt="gateway pod terminal">
</div>
</div>
<div class="paragraph">
<p>Paste the following curl command into the terminal to test the new API endpoint:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl --location 'http://localhost:8080/fake/poi/add/point/' \
--header 'Content-Type: application/json' \
--data '{
"name":"Milano, Italy",
"description":"example city",
"coordinates":[45.464203,9.189982]
}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>A successful <code>POST</code> to your new API endpoint will return <code>inserted custom data point</code>. Reload the map to look for your new Point.</p>
</div>
<div class="paragraph">
<p>If you see more than two points in the "Red Hat Summit POI" dataset, then you have successfully completed our Golden Path onboarding experience by pushing, testing, and verifying your change.</p>
</div>
<div class="paragraph">
<p>As a final step, reconnect the backend component with the gateway component to make the National Parks dataset visible again:</p>
</div>
<div class="listingblock console-input">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl poi-gateway-app:8080/backend/register/poi-backend?endpoint=http://poi-backend-app:8080</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="next_steps"><a class="anchor" href="#next_steps"></a>Paving your own Golden Path</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You have made it to the end of this particular Golden Path.  <em>Congratulations!</em></p>
</div>
<div class="paragraph">
<p>Now, it&#8217;s your turn to begin crafting your own Golden Path experiences using Backstage Software Templates and related platform services such as ArgoCD, Tekton, Dev Spaces, and OpenShift.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For information about setting up your own Backstage / Janus demo environment, see: <a href="https://janus-idp.io/demo-setup/install/" class="bare">https://janus-idp.io/demo-setup/install/</a></p>
</li>
<li>
<p>To learn about the Software Templates that were used in this workshop, visit: <a href="https://github.com/hpgrahsl/rhsummit23-backstage-gpts" class="bare">https://github.com/hpgrahsl/rhsummit23-backstage-gpts</a></p>
</li>
<li>
<p>To share your feedback on this workshop, open an issue here: <a href="https://github.com/redhat-scholars/backstage-workshop/issues" class="bare">https://github.com/redhat-scholars/backstage-workshop/issues</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Thank you for helping review this content. Your feedback is appreciated!</em></p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="03-components.html">3. Components</a></span>
</nav>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <a class="rhd-logo" href="https://developers.redhat.com" target="_blank"></div>
</footer>
<script src="../_/js/vendor/clipboard.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
